import{r as u,j as e,c as se,B as ee,u as O,L as F,a as ns,b as is,R as ls}from"./index-VGU-9NUU.js";import{a as os,b as cs}from"./FetchApiRequirement-DR7fnfCw.js";import{a as ds}from"./instance-DZS3_tzi.js";import{a as xs}from"./AxiosConfigHeader-CNHt4vQr.js";import{f as ms}from"./FetchApiDesign-0YxtH5qw.js";import{B as Oe,d as Ee}from"./NavigateNext-CCd8x6vU.js";import{d as I}from"./ExpandMore-C-bX1KXb.js";import{g as te,a as re,k as Ve,s as Z,o as K,_ as M,b as Ue,u as ae,d as ne,e as ie,r as us,m as ps,p as le,q as ge,t as Ie,v as hs,i as je}from"./styled-C3jJ_e4t.js";import{r as be}from"./createSvgIcon-Bust3YDQ.js";import"./Home-1z4c4CsO.js";import{P as J}from"./PutApiRequirement-BtafY354.js";import{f as j}from"./FormatCurrency-ClX-n8WG.js";import{m as U}from"./motion-ChqZ_GeW.js";import{P as fs,F as gs}from"./PaymentApi-CP6OkxmO.js";import{F as js}from"./FetchApiDesign-Bf2vjSNd.js";import{F as L,C as Q}from"./CreateConversationJoin-jXrej5vW.js";import{A as $,a as D,b as R}from"./AccordionSummary-WSd_s99g.js";import{T as v}from"./Typography-q_9hv_ih.js";import{B as T}from"./Button-1sJCo5hQ.js";import{A as bs,D as ys,a as ws,b as vs,c as Ns}from"./ApiChangeWarranty-P035sZHb.js";import{T as Ss}from"./Tooltip-DHGOYSf9.js";import{I as Cs}from"./IconButton-DWvNdrqB.js";import ks from"./PageError-RDIj96vw.js";import{S as Le}from"./Stack-lgF4DL-X.js";import{u as Ms,P as de}from"./mergeSlotProps-CMtaL82j.js";import{c as xe,d as me,e as ue,a as pe,b as V}from"./TableRow-C5qbdRgV.js";import{u as Ps,a as Is}from"./useIsFocusVisible-DwfdVPIc.js";function $s(s){return te("MuiCircularProgress",s)}re("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Ds=["className","color","disableShrink","size","style","thickness","value","variant"];let oe=s=>s,$e,De,Re,Ge;const A=44,Rs=Ve($e||($e=oe`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Gs=Ve(De||(De=oe`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Ws=s=>{const{classes:t,variant:r,color:a,disableShrink:n}=s,l={root:["root",r,`color${K(a)}`],svg:["svg"],circle:["circle",`circle${K(r)}`,n&&"circleDisableShrink"]};return ie(l,$s,t)},qs=Z("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.root,t[r.variant],t[`color${K(r.color)}`]]}})(({ownerState:s,theme:t})=>M({display:"inline-block"},s.variant==="determinate"&&{transition:t.transitions.create("transform")},s.color!=="inherit"&&{color:(t.vars||t).palette[s.color].main}),({ownerState:s})=>s.variant==="indeterminate"&&Ue(Re||(Re=oe`
      animation: ${0} 1.4s linear infinite;
    `),Rs)),_s=Z("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(s,t)=>t.svg})({display:"block"}),Ts=Z("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.circle,t[`circle${K(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})(({ownerState:s,theme:t})=>M({stroke:"currentColor"},s.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},s.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:s})=>s.variant==="indeterminate"&&!s.disableShrink&&Ue(Ge||(Ge=oe`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Gs)),zs=u.forwardRef(function(t,r){const a=ae({props:t,name:"MuiCircularProgress"}),{className:n,color:l="primary",disableShrink:d=!1,size:o=40,style:c,thickness:x=3.6,value:i=0,variant:f="indeterminate"}=a,m=ne(a,Ds),p=M({},a,{color:l,disableShrink:d,size:o,thickness:x,value:i,variant:f}),h=Ws(p),g={},w={},N={};if(f==="determinate"){const C=2*Math.PI*((A-x)/2);g.strokeDasharray=C.toFixed(3),N["aria-valuenow"]=Math.round(i),g.strokeDashoffset=`${((100-i)/100*C).toFixed(3)}px`,w.transform="rotate(-90deg)"}return e.jsx(qs,M({className:se(h.root,n),style:M({width:o,height:o},w,c),ownerState:p,ref:r,role:"progressbar"},N,m,{children:e.jsx(_s,{className:h.svg,ownerState:p,viewBox:`${A/2} ${A/2} ${A} ${A}`,children:e.jsx(Ts,{className:h.circle,style:g,ownerState:p,cx:A,cy:A,r:(A-x)/2,fill:"none",strokeWidth:x})})}))});function As(s){return te("MuiDialogContentText",s)}re("MuiDialogContentText",["root"]);const Fs=["children","className"],Bs=s=>{const{classes:t}=s,a=ie({root:["root"]},As,t);return M({},t,a)},Os=Z(v,{shouldForwardProp:s=>us(s)||s==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(s,t)=>t.root})({}),Es=u.forwardRef(function(t,r){const a=ae({props:t,name:"MuiDialogContentText"}),{className:n}=a,l=ne(a,Fs),d=Bs(l);return e.jsx(Os,M({component:"p",variant:"body1",color:"text.secondary",ref:r,ownerState:l,className:se(d.root,n)},a,{classes:d}))}),We=u.createContext();function Vs(s){return te("MuiGrid",s)}const Us=[0,1,2,3,4,5,6,7,8,9,10],Ls=["column-reverse","column","row-reverse","row"],Hs=["nowrap","wrap-reverse","wrap"],Y=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],X=re("MuiGrid",["root","container","item","zeroMinWidth",...Us.map(s=>`spacing-xs-${s}`),...Ls.map(s=>`direction-xs-${s}`),...Hs.map(s=>`wrap-xs-${s}`),...Y.map(s=>`grid-xs-${s}`),...Y.map(s=>`grid-sm-${s}`),...Y.map(s=>`grid-md-${s}`),...Y.map(s=>`grid-lg-${s}`),...Y.map(s=>`grid-xl-${s}`)]),Ks=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function H(s){const t=parseFloat(s);return`${t}${String(s).replace(String(t),"")||"px"}`}function Zs({theme:s,ownerState:t}){let r;return s.breakpoints.keys.reduce((a,n)=>{let l={};if(t[n]&&(r=t[n]),!r)return a;if(r===!0)l={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(r==="auto")l={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const d=le({values:t.columns,breakpoints:s.breakpoints.values}),o=typeof d=="object"?d[n]:d;if(o==null)return a;const c=`${Math.round(r/o*1e8)/1e6}%`;let x={};if(t.container&&t.item&&t.columnSpacing!==0){const i=s.spacing(t.columnSpacing);if(i!=="0px"){const f=`calc(${c} + ${H(i)})`;x={flexBasis:f,maxWidth:f}}}l=M({flexBasis:c,flexGrow:0,maxWidth:c},x)}return s.breakpoints.values[n]===0?Object.assign(a,l):a[s.breakpoints.up(n)]=l,a},{})}function Ys({theme:s,ownerState:t}){const r=le({values:t.direction,breakpoints:s.breakpoints.values});return ge({theme:s},r,a=>{const n={flexDirection:a};return a.indexOf("column")===0&&(n[`& > .${X.item}`]={maxWidth:"none"}),n})}function He({breakpoints:s,values:t}){let r="";Object.keys(t).forEach(n=>{r===""&&t[n]!==0&&(r=n)});const a=Object.keys(s).sort((n,l)=>s[n]-s[l]);return a.slice(0,a.indexOf(r))}function Js({theme:s,ownerState:t}){const{container:r,rowSpacing:a}=t;let n={};if(r&&a!==0){const l=le({values:a,breakpoints:s.breakpoints.values});let d;typeof l=="object"&&(d=He({breakpoints:s.breakpoints.values,values:l})),n=ge({theme:s},l,(o,c)=>{var x;const i=s.spacing(o);return i!=="0px"?{marginTop:`-${H(i)}`,[`& > .${X.item}`]:{paddingTop:H(i)}}:(x=d)!=null&&x.includes(c)?{}:{marginTop:0,[`& > .${X.item}`]:{paddingTop:0}}})}return n}function Qs({theme:s,ownerState:t}){const{container:r,columnSpacing:a}=t;let n={};if(r&&a!==0){const l=le({values:a,breakpoints:s.breakpoints.values});let d;typeof l=="object"&&(d=He({breakpoints:s.breakpoints.values,values:l})),n=ge({theme:s},l,(o,c)=>{var x;const i=s.spacing(o);return i!=="0px"?{width:`calc(100% + ${H(i)})`,marginLeft:`-${H(i)}`,[`& > .${X.item}`]:{paddingLeft:H(i)}}:(x=d)!=null&&x.includes(c)?{}:{width:"100%",marginLeft:0,[`& > .${X.item}`]:{paddingLeft:0}}})}return n}function Xs(s,t,r={}){if(!s||s<=0)return[];if(typeof s=="string"&&!Number.isNaN(Number(s))||typeof s=="number")return[r[`spacing-xs-${String(s)}`]];const a=[];return t.forEach(n=>{const l=s[n];Number(l)>0&&a.push(r[`spacing-${n}-${String(l)}`])}),a}const et=Z("div",{name:"MuiGrid",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:r}=s,{container:a,direction:n,item:l,spacing:d,wrap:o,zeroMinWidth:c,breakpoints:x}=r;let i=[];a&&(i=Xs(d,x,t));const f=[];return x.forEach(m=>{const p=r[m];p&&f.push(t[`grid-${m}-${String(p)}`])}),[t.root,a&&t.container,l&&t.item,c&&t.zeroMinWidth,...i,n!=="row"&&t[`direction-xs-${String(n)}`],o!=="wrap"&&t[`wrap-xs-${String(o)}`],...f]}})(({ownerState:s})=>M({boxSizing:"border-box"},s.container&&{display:"flex",flexWrap:"wrap",width:"100%"},s.item&&{margin:0},s.zeroMinWidth&&{minWidth:0},s.wrap!=="wrap"&&{flexWrap:s.wrap}),Ys,Js,Qs,Zs);function st(s,t){if(!s||s<=0)return[];if(typeof s=="string"&&!Number.isNaN(Number(s))||typeof s=="number")return[`spacing-xs-${String(s)}`];const r=[];return t.forEach(a=>{const n=s[a];if(Number(n)>0){const l=`spacing-${a}-${String(n)}`;r.push(l)}}),r}const tt=s=>{const{classes:t,container:r,direction:a,item:n,spacing:l,wrap:d,zeroMinWidth:o,breakpoints:c}=s;let x=[];r&&(x=st(l,c));const i=[];c.forEach(m=>{const p=s[m];p&&i.push(`grid-${m}-${String(p)}`)});const f={root:["root",r&&"container",n&&"item",o&&"zeroMinWidth",...x,a!=="row"&&`direction-xs-${String(a)}`,d!=="wrap"&&`wrap-xs-${String(d)}`,...i]};return ie(f,Vs,t)},qe=u.forwardRef(function(t,r){const a=ae({props:t,name:"MuiGrid"}),{breakpoints:n}=Ms(),l=ps(a),{className:d,columns:o,columnSpacing:c,component:x="div",container:i=!1,direction:f="row",item:m=!1,rowSpacing:p,spacing:h=0,wrap:g="wrap",zeroMinWidth:w=!1}=l,N=ne(l,Ks),C=p||h,k=c||h,b=u.useContext(We),G=i?o||12:b,W={},q=M({},N);n.keys.forEach(E=>{N[E]!=null&&(W[E]=N[E],delete q[E])});const z=M({},l,{columns:G,container:i,direction:f,item:m,rowSpacing:C,columnSpacing:k,wrap:g,zeroMinWidth:w,spacing:h},W,{breakpoints:n.keys}),_=tt(z);return e.jsx(We.Provider,{value:G,children:e.jsx(et,M({ownerState:z,className:se(_.root,d),as:x,ref:r},q))})});function rt(s){return te("MuiLink",s)}const at=re("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),Ke={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},nt=s=>Ke[s]||s,it=({theme:s,ownerState:t})=>{const r=nt(t.color),a=Ie(s,`palette.${r}`,!1)||t.color,n=Ie(s,`palette.${r}Channel`);return"vars"in s&&n?`rgba(${n} / 0.4)`:hs(a,.4)},lt=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],ot=s=>{const{classes:t,component:r,focusVisible:a,underline:n}=s,l={root:["root",`underline${K(n)}`,r==="button"&&"button",a&&"focusVisible"]};return ie(l,rt,t)},ct=Z(v,{name:"MuiLink",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.root,t[`underline${K(r.underline)}`],r.component==="button"&&t.button]}})(({theme:s,ownerState:t})=>M({},t.underline==="none"&&{textDecoration:"none"},t.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},t.underline==="always"&&M({textDecoration:"underline"},t.color!=="inherit"&&{textDecorationColor:it({theme:s,ownerState:t})},{"&:hover":{textDecorationColor:"inherit"}}),t.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${at.focusVisible}`]:{outline:"auto"}})),_e=u.forwardRef(function(t,r){const a=ae({props:t,name:"MuiLink"}),{className:n,color:l="primary",component:d="a",onBlur:o,onFocus:c,TypographyClasses:x,underline:i="always",variant:f="inherit",sx:m}=a,p=ne(a,lt),{isFocusVisibleRef:h,onBlur:g,onFocus:w,ref:N}=Ps(),[C,k]=u.useState(!1),b=Is(r,N),G=_=>{g(_),h.current===!1&&k(!1),o&&o(_)},W=_=>{w(_),h.current===!0&&k(!0),c&&c(_)},q=M({},a,{color:l,component:d,focusVisible:C,underline:i,variant:f}),z=ot(q);return e.jsx(ct,M({color:l,className:se(z.root,n),classes:x,component:d,onBlur:G,onFocus:W,ref:b,ownerState:q,variant:f,sx:[...Object.keys(Ke).includes(l)?[]:[{color:l}],...Array.isArray(m)?m:[m]]},p))}),dt=async s=>{try{return(await ds.get(`/UserRequirement?UsersId=${s}`,xs)).data}catch(t){return console.error(t),[]}},xt=({data:s,onViewDetail:t,index:r})=>{const a=Se(s.status),n=Ne(a);return e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center p-4 border-b border-gray-200 hover:bg-gray-100",children:[e.jsx("p",{className:"md:w-1/4 py-2 px-4",children:r}),e.jsx("p",{className:"md:w-1/4 py-2 px-4",children:s.createdDate}),e.jsx("div",{className:"md:w-1/4 py-2 px-4",children:e.jsx("span",{className:`py-1 px-3 rounded-full text-xs ${n}`,children:a})}),e.jsx("span",{onClick:()=>t(s),className:"md:w-1/4 py-2 px-4 hover:text-slate-950 duration-200 cursor-pointer text-blue-500",children:"View Detail"})]})};var ye={},mt=je;Object.defineProperty(ye,"__esModule",{value:!0});var Ze=ye.default=void 0,ut=mt(be()),pt=e;Ze=ye.default=(0,ut.default)((0,pt.jsx)("path",{d:"m9 19 1.41-1.41L5.83 13H22v-2H5.83l4.59-4.59L9 5l-7 7z"}),"West");var we={},ht=je;Object.defineProperty(we,"__esModule",{value:!0});var Ye=we.default=void 0,ft=ht(be()),gt=e;Ye=we.default=(0,ft.default)((0,gt.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel");function jt({title:s}){return e.jsx("div",{className:"col-span-2 flex flex-col justify-center items-center",children:e.jsxs("div",{className:"min-h-[350px] w-[500px]",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:s}),e.jsxs("div",{className:"border px-6 py-6",children:[e.jsx("div",{className:"text-center mb-2",children:e.jsx(Ye,{color:"error",sx:{fontSize:"36px"}})}),e.jsx("h3",{className:"text-center text-lg",children:"Your order has been canceled."})]})]})})}var ve={},bt=je;Object.defineProperty(ve,"__esModule",{value:!0});var B=ve.default=void 0,yt=bt(be()),wt=e;B=ve.default=(0,yt.default)((0,wt.jsx)("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m4.2 14.2L11 13V7h1.5v5.2l4.5 2.7z"}),"WatchLater");function Te({setStatus:s,status:t,title:r,designDetail:a,requirementDetail:n,total:l}){const d=async()=>{t=="3"&&await J({...n,status:"-2"})!=null&&(ee.success("Decline the price quote successful"),s("-2")),t=="7"&&await J({...n,status:"-7"})!=null&&(ee.success("Decline the price quote successful"),s("-7"))},o=async()=>{var x,i,f;t=="3"&&await J({...n,status:"4",masterGemStonePriceAtMoment:a.masterGemstone!=null?(x=a.masterGemstone)==null?void 0:x.price:0,materialPriceAtMoment:(i=a.material)==null?void 0:i.price,stonePriceAtMoment:a.stone!=null?(f=a.stone)==null?void 0:f.price:0,totalMoney:l})!=null&&(ee.success("Accept the price quote successful"),s("4")),t=="7"&&await J({...n,status:"8"})!=null&&(ee.success("Accept the design sketch successful"),s("8"))};function c({status:x,designDetail:i,requirementDetail:f}){var m,p,h;switch(x){case"3":return e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-3",children:"Summary:"}),e.jsxs("div",{className:"bg-gray-200 p-4 rounded-lg w-full px-3 mb-3 ",children:[i.masterGemstone!=null?e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300",children:[e.jsx("p",{children:"Master Gemstone"}),e.jsx("p",{children:j((m=i.masterGemstone)==null?void 0:m.price)})]}):null,i.stone!=null?e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300",children:[e.jsx("p",{children:"Melee Stones"}),e.jsx("p",{children:j((p=i.stone)==null?void 0:p.price)})]}):null,e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300 ",children:[e.jsx("p",{children:"Material"}),e.jsx("p",{children:j(((h=i.material)==null?void 0:h.price)*f.weightOfMaterial)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300 ",children:[e.jsx("p",{children:"Machining Fee"}),e.jsx("p",{children:j(f.machiningFee)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300",children:[e.jsx("p",{className:"text-[20px]",children:"Total"}),e.jsx("p",{className:"text-[20px]",children:j(Math.ceil(l))})]})]})]});case"7":return e.jsx("div",{className:"mb-6",children:f.design3D==null?e.jsxs("div",{className:"border px-6 py-6",children:[e.jsx("div",{className:"text-center mb-2",children:e.jsx(B,{color:"warning",sx:{fontSize:"36px"}})}),e.jsx("h3",{className:"text-center text-lg",children:"Please wait for design staff to draw the design based on your requirement"})]}):e.jsx("div",{className:"border",children:e.jsx("img",{src:f.design3D,alt:"Image of design in requirement #"+f.requirementId})})})}}return e.jsx("div",{className:"col-span-2 flex flex-col justify-center items-center",children:e.jsxs("div",{className:"min-h-[350px] w-[500px]",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:r}),e.jsx(c,{requirementDetail:n,designDetail:a,status:t}),e.jsxs(U.div,{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{className:"py-3 px-6 w-full bg-red-500 text-white hover:bg-red-700 rounded-md transition-all ease-linear",onClick:d,children:"Decline"}),e.jsx("button",{className:"py-3 px-6 w-full bg-green-500 text-white hover:bg-green-700 rounded-md transition-all ease-linear",onClick:o,children:"Accept"})]})]})})}const ce=u.createContext();function vt({children:s,requirementData:t,ChangeToggle:r,status:a,setStatus:n}){const[l,d]=u.useState(""),[o,c]=u.useState({}),{UserId:x}=O(),[i,f]=u.useState(t);console.log(t);async function m(h){const g={id:"string",paymentContent:"Payment for order #"+i.requirementId,paymentCurrency:"VND",paymentRefId:"string",requiredAmount:h,paymentLanguage:"EN",merchantId:"MERCHANT123",paymentDestinationId:"DEST123",paymentStatus:"Completed",paidAmount:h,userId:Number(x),requirementId:i.requirementId};try{const w=await fs(g);w?(console.log(w),window.location.href=w):console.error("Failed to get response URL.")}catch(w){console.error("Payment processing failed:",w)}}async function p(){const h=await js(i.designId);c(h)}return u.useEffect(()=>{p()},[]),u.useEffect(()=>{var C,k,b;const h=o.masterGemstone!=null?(C=o.masterGemstone)==null?void 0:C.price:0,g=o.stone!=null?(k=o.stone)==null?void 0:k.price:0,N=(o.material!=null?(b=o.material)==null?void 0:b.price:0)*i.weightOfMaterial+i.machiningFee+h+g;d(N)},[o]),e.jsx(ce.Provider,{value:{total:l,payNow:m,requirementDetail:i,designDetail:o,ChangeToggle:r,status:a,setStatus:n},children:s})}function Nt({moneyWillPay:s}){console.log(s);const{total:t,requirementDetail:r,designDetail:a,payNow:n}=u.useContext(ce);return e.jsx("button",{onClick:l=>{n(s)},className:"mt-6 py-2 px-4 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700 transition-all",children:"Pay Now"})}function ze({title:s,designDetail:t,requirementDetail:r,total:a,status:n}){function l({status:d}){var o,c,x,i,f,m;switch(d){case"4":return e.jsxs("div",{children:[e.jsxs("div",{className:"bg-gray-200 p-4 rounded-lg w-full px-3 mb-3 ",children:[t.masterGemstone!=null?e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300",children:[e.jsx("p",{children:"Master Gemstone"}),e.jsx("p",{children:j((o=t.masterGemstone)==null?void 0:o.price)})]}):null,t.stone!=null?e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300",children:[e.jsx("p",{children:"Melee Stones"}),e.jsx("p",{children:j((c=t.stone)==null?void 0:c.price)})]}):null,e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300 ",children:[e.jsx("p",{children:"Material"}),e.jsx("p",{children:j(((x=t.material)==null?void 0:x.price)*r.weightOfMaterial)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300 ",children:[e.jsx("p",{children:"Machining Fee"}),e.jsx("p",{children:j(r.machiningFee)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300",children:[e.jsx("p",{className:"text-[18px]",children:"Total"}),e.jsx("p",{className:"text-[18px]",children:j(Math.ceil(a))})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300 text-lg text-gray-900 font-semibold",children:[e.jsx("p",{className:"text-[20px]",children:"Deposit 50%"}),e.jsx("p",{className:"text-[20px]",children:j(Math.ceil(a/2))})]})})]});default:return e.jsxs("div",{children:[e.jsxs("div",{className:"bg-gray-200 p-4 rounded-lg w-full px-3 mb-3 ",children:[t.masterGemstone!=null?e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300",children:[e.jsx("p",{children:"Master Gemstone"}),e.jsx("p",{children:j((i=t.masterGemstone)==null?void 0:i.price)})]}):null,t.stone!=null?e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300",children:[e.jsx("p",{children:"Melee Stones"}),e.jsx("p",{children:j((f=t.stone)==null?void 0:f.price)})]}):null,e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300 ",children:[e.jsx("p",{children:"Material"}),e.jsx("p",{children:j(((m=t.material)==null?void 0:m.price)*r.weightOfMaterial)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300 ",children:[e.jsx("p",{children:"Machining Fee"}),e.jsx("p",{children:j(r.machiningFee)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300",children:[e.jsx("p",{className:"text-[18px]",children:"Total"}),e.jsx("p",{className:"text-[18px]",children:j(Math.ceil(a))})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300 text-lg text-gray-900 font-semibold",children:[e.jsx("p",{className:"text-[18px]",children:"Deposit 50%"}),e.jsxs("p",{className:"text-[18px]",children:["-",j(Math.ceil(a/2))]})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300 text-lg text-gray-900 font-semibold",children:[e.jsx("p",{className:"text-[20px]",children:"Pay the rest"}),e.jsx("p",{className:"text-[20px]",children:j(r.totalMoney-Math.ceil(a/2))})]})})]})}}return e.jsx("div",{className:"col-span-2 flex flex-col justify-center items-center",children:e.jsxs("div",{className:"min-h-[350px] w-[500px]",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:s}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-3",children:"Summary:"}),e.jsx(l,{status:n}),e.jsx(Nt,{moneyWillPay:Math.abs(Math.ceil(r.totalMoney-Math.ceil(a/2)))})]})})}function he({title:s,designDetail:t,requirementDetail:r,total:a,status:n}){const{UserId:l}=O();function d({status:o,designDetail:c,requirementDetail:x}){var i,f,m,p,h,g;switch(o){case"-3":return e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-3",children:"Summary:"}),e.jsxs("div",{className:"bg-gray-200 p-4 rounded-lg w-full px-3 mb-3 ",children:[c.masterGemstone!=null?e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300",children:[e.jsx("p",{children:"Master Gemstone"}),e.jsx("p",{children:j((i=c.masterGemstone)==null?void 0:i.price)})]}):null,c.stone!=null?e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300",children:[e.jsx("p",{children:"Melee Stones"}),e.jsx("p",{children:j((f=c.stone)==null?void 0:f.price)})]}):null,e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300 ",children:[e.jsx("p",{children:"Material"}),e.jsx("p",{children:j(((m=c.material)==null?void 0:m.price)*x.weightOfMaterial)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300 ",children:[e.jsx("p",{children:"Machining Fee"}),e.jsx("p",{children:j(x.machiningFee)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300",children:[e.jsx("p",{className:"text-[20px]",children:"Total"}),e.jsx("p",{className:"text-[20px]",children:j(Math.ceil(a))})]})]})]});case"-2":{const[w,N]=u.useState({});async function C(k){const G=await L(5,k.requirementId);G!=null&&N(G)}return u.useEffect(()=>{C(x)},[]),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-3",children:"Summary:"}),e.jsxs("div",{className:"bg-gray-200 p-4 rounded-lg w-full px-3 mb-3 ",children:[c.masterGemstone!=null?e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300",children:[e.jsx("p",{children:"Master Gemstone"}),e.jsx("p",{children:j((p=c.masterGemstone)==null?void 0:p.price)})]}):null,c.stone!=null?e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300",children:[e.jsx("p",{children:"Melee Stones"}),e.jsx("p",{children:j((h=c.stone)==null?void 0:h.price)})]}):null,e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300 ",children:[e.jsx("p",{children:"Material"}),e.jsx("p",{children:j(((g=c.material)==null?void 0:g.price)*x.weightOfMaterial)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300 ",children:[e.jsx("p",{children:"Machining Fee"}),e.jsx("p",{children:j(x.machiningFee)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300",children:[e.jsx("p",{className:"text-[20px]",children:"Total"}),e.jsx("p",{className:"text-[20px]",children:j(Math.ceil(a))})]})]}),e.jsxs($,{children:[e.jsxs(D,{expandIcon:e.jsx(I,{}),"aria-controls":"panel1-content",id:"panel1-header",className:"text-[24px]",children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-3 mr-6",children:"Sale staff information"}),e.jsx(v,{sx:{color:"text.secondary"},children:e.jsx(F,{to:"/chat",children:e.jsx(T,{variant:"contained",onClick:k=>{k.stopPropagation(),CreateConversationJoin(l,w.usersId),navigate("/chat",{replace:!1})},children:"Chat"})})})]}),e.jsx(R,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:w.image!=null?w.image:"https://img.freepik.com/free-psd/3d-illustration-person-with-sunglasses_23-2149436188.jpg?size=338&ext=jpg&ga=GA1.1.1141335507.1719273600&semt=ais_user",className:"w-[150px] rounded-full",alt:""}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-[20px]",children:["Sale staff name: ",w.name]}),e.jsxs("h4",{children:["Email: ",w.email]})]})]})})]})]})}}}return e.jsx("div",{className:"col-span-2 flex flex-col justify-center items-center",children:e.jsxs("div",{className:"min-h-[350px] w-[500px]",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:s}),e.jsx(d,{requirementDetail:r,designDetail:t,status:n}),e.jsxs("div",{className:"border px-6 py-6",children:[e.jsx("div",{className:"text-center mb-2",children:e.jsx(B,{color:"warning",sx:{fontSize:"36px"}})}),e.jsx("h3",{className:"text-center text-lg",children:n!=-7&&n!=-2?"Please wait for manager to quote the price again":n==-2?"Please discuss to sale staff":"Please wait for design staff to redraw the sketch again"})]})]})})}function Ae({title:s,requirementDetail:t,status:r}){const{UserId:a}=O();if(r=="5")return e.jsx("div",{className:"col-span-2 flex flex-col justify-center items-center",children:e.jsxs("div",{className:"min-h-[350px] w-[500px]",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:s}),e.jsxs("div",{className:"border px-6 py-6",children:[e.jsx("div",{className:"text-center mb-2",children:e.jsx(B,{color:"warning",sx:{fontSize:"36px"}})}),e.jsx("h3",{className:"text-center text-lg",children:"Please wait for design staff take your order to working"})]})]})});{const[n,l]=u.useState({});async function d(o){const x=await L(3,o.requirementId);x!=null&&l(x)}return u.useEffect(()=>{d(t)},[]),e.jsx("div",{className:"col-span-2 flex flex-col justify-center items-center",children:e.jsxs("div",{className:"min-h-[350px] w-[500px]",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:s}),e.jsxs("div",{className:"border px-6 py-6",children:[e.jsx("div",{className:"text-center mb-2",children:e.jsx(B,{color:"warning",sx:{fontSize:"36px"}})}),e.jsx("h3",{className:"text-center text-lg",children:"Please wait for design staff to draw the design based on your requirement"})]}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-3",children:"Designer information:"}),e.jsxs($,{children:[e.jsxs(D,{expandIcon:e.jsx(I,{}),"aria-controls":"panel1-content",id:"panel1-header",className:"text-[24px]",children:[e.jsx(v,{variant:"h3",sx:{width:"33%",flexShrink:0,fontSize:"24px"},children:"Designer details"}),e.jsx(v,{sx:{color:"text.secondary"},children:e.jsx(F,{to:"/chat",children:e.jsx(T,{variant:"contained",onClick:o=>{o.stopPropagation(),Q(a,n.usersId)},children:"Chat with design staff"})})})]}),e.jsx(R,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:n.image!=null?n.image:"https://img.freepik.com/free-psd/3d-illustration-person-with-sunglasses_23-2149436188.jpg?size=338&ext=jpg&ga=GA1.1.1141335507.1719273600&semt=ais_user",className:"w-[150px] rounded-full",alt:""}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-[20px]",children:["Designer name: ",n.name]}),e.jsxs("h4",{children:["Email: ",n.email]})]})]})})]})]})})}}function Fe({title:s,requirementDetail:t,status:r}){const{UserId:a}=O(),n=ns();if(r=="8")return e.jsx("div",{className:"col-span-2 flex flex-col justify-center items-center",children:e.jsxs("div",{className:"min-h-[350px] w-[500px]",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:s}),e.jsxs("div",{className:"border px-6 py-6",children:[e.jsx("div",{className:"text-center mb-2",children:e.jsx(B,{color:"warning",sx:{fontSize:"36px"}})}),e.jsx("h3",{className:"text-center text-lg",children:"Please wait for Production staff will take your order to work."})]})]})});{const[l,d]=u.useState({});async function o(c){const i=await L(4,c.requirementId);i!=null&&d(i)}return u.useEffect(()=>{o(t)},[]),e.jsx("div",{className:"col-span-2 flex flex-col justify-center items-center",children:e.jsxs("div",{className:"min-h-[350px] w-[500px]",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:s}),e.jsxs("div",{className:"border px-6 py-6 mb-6",children:[e.jsx("div",{className:"text-center mb-2",children:e.jsx(B,{color:"warning",sx:{fontSize:"36px"}})}),e.jsx("h3",{className:"text-center text-lg",children:"Please wait for Production staff will make the product based on your requirement"})]}),e.jsxs($,{children:[e.jsxs(D,{expandIcon:e.jsx(I,{}),"aria-controls":"panel1-content",id:"panel1-header",className:"text-[24px]",children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-3 mr-6",children:"Production staff information"}),e.jsx(v,{sx:{color:"text.secondary"},children:e.jsx(F,{to:"/chat",children:e.jsx(T,{variant:"contained",onClick:c=>{c.stopPropagation(),Q(a,l.usersId),n("/chat",{replace:!1})},children:"Chat"})})})]}),e.jsx(R,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:l.image!=null?l.image:"https://img.freepik.com/free-psd/3d-illustration-person-with-sunglasses_23-2149436188.jpg?size=338&ext=jpg&ga=GA1.1.1141335507.1719273600&semt=ais_user",className:"w-[150px] rounded-full",alt:""}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-[20px]",children:["Production staff name: ",l.name]}),e.jsxs("h4",{children:["Email: ",l.email]})]})]})})]})]})})}}function fe(s){const t=new Date(s),r=t.getHours().toString().padStart(2,"0"),a=t.getMinutes().toString().padStart(2,"0"),n=t.getDate().toString().padStart(2,"0"),l=(t.getMonth()+1).toString().padStart(2,"0"),d=t.getFullYear(),o=`${r}:${a}`,c=`${n}/${l}/${d}`;return`${o} ${c}`}function Be({title:s,designDetail:t,requirementDetail:r,total:a,status:n}){var N,C,k;const[l,d]=u.useState({}),[o,c]=u.useState({}),[x,i]=u.useState({}),[f,m]=u.useState([]),[p,h]=u.useState([]),{UserId:g}=O();async function w(b){const G=await L(3,b);d(G);const W=await L(4,b);c(W);const q=await L(5,b);i(q);const z=await gs(b);m(z);const _=await bs(b);h(_)}return u.useEffect(()=>{w(r.requirementId)},[]),e.jsx("div",{className:"col-span-2 flex flex-col justify-center items-center",children:e.jsxs("div",{className:"min-h-[350px] w-[500px]",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:s}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:r.design3D,alt:"image last product of requirement #"+r.requirementId,className:"w-full h-[300px] object-contain"})}),e.jsxs($,{children:[e.jsx(D,{expandIcon:e.jsx(I,{}),"aria-controls":"panel1-content",id:"panel1-header",className:"text-[24px]",children:e.jsx(v,{variant:"h3",sx:{width:"33%",flexShrink:0,fontSize:"20px"},children:"Summary"})}),e.jsx(R,{children:e.jsxs("div",{className:"bg-gray-200 p-4 rounded-lg w-full px-3 mb-3 ",children:[t.masterGemstone!=null?e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300",children:[e.jsx("p",{children:"Master Gemstone"}),e.jsx("p",{children:j((N=t.masterGemstone)==null?void 0:N.price)})]}):null,t.stone!=null?e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300",children:[e.jsx("p",{children:"Melee Stones"}),e.jsx("p",{children:j((C=t.stone)==null?void 0:C.price)})]}):null,e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300 ",children:[e.jsx("p",{children:"Material"}),e.jsx("p",{children:j(((k=t.material)==null?void 0:k.price)*r.weightOfMaterial)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300 ",children:[e.jsx("p",{children:"Machining Fee"}),e.jsx("p",{children:j(r.machiningFee)})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300",children:[e.jsx("p",{className:"text-[20px]",children:"Total"}),e.jsx("p",{className:"text-[20px]",children:j(Math.ceil(r.totalMoney))})]})]})})]}),e.jsxs($,{children:[e.jsx(D,{expandIcon:e.jsx(I,{}),"aria-controls":"panel1-content",id:"panel1-header",className:"text-[24px]",children:e.jsx(v,{variant:"h3",sx:{width:"100%",flexShrink:0,fontSize:"20px"},children:"Transaction history"})}),e.jsx(R,{children:e.jsxs("div",{className:"bg-gray-200 p-4 rounded-lg w-full px-3 ",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300 ",children:[e.jsx("p",{className:"w-1/4",children:"Payment Id"}),e.jsx("p",{className:"w-1/4",children:"Transaction date"}),e.jsx("p",{className:"w-1/4",children:"Amount"}),e.jsx("p",{className:"w-1/4",children:"Status"})]}),f.map((b,G)=>e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300 ",children:[e.jsxs("p",{className:"w-1/4",children:["#",b.paymentId]}),e.jsx("p",{className:"w-1/4",children:fe(b.completedAt)}),e.jsx("p",{className:"w-1/4",children:j(b.amount)}),e.jsx("p",{className:"w-1/4",children:b.status})]},b.paymentId+"transaction"))]})})]}),e.jsxs($,{children:[e.jsx(D,{expandIcon:e.jsx(I,{}),"aria-controls":"panel1-content",id:"panel1-header",className:"text-[24px]",children:e.jsx(v,{variant:"h3",sx:{width:"100%",flexShrink:0,fontSize:"20px"},children:"Warranty card"})}),e.jsx(R,{children:e.jsxs("div",{className:"bg-gray-200 p-4 rounded-lg w-full px-3 ",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300 ",children:[e.jsx("p",{className:"w-1/3",children:"Name"}),e.jsx("p",{className:"w-1/3",children:"Effective date"}),e.jsx("p",{className:"w-1/3",children:"Expired date"})]}),p.map((b,G)=>{var W;return e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-300 ",children:[e.jsx("p",{className:"w-1/3",children:(W=b.warrantyCard)==null?void 0:W.title}),e.jsx("p",{className:"w-1/3",children:fe(b.dateCreated)}),e.jsx("p",{className:"w-1/3",children:fe(b.expirationDate)})]},b.warrantyCardId+" Warranty")})]})})]}),e.jsxs($,{className:"mb-6",children:[e.jsx(D,{expandIcon:e.jsx(I,{}),"aria-controls":"panel1-content",id:"panel1-header",className:"text-[24px]",children:e.jsx(v,{variant:"h3",sx:{width:"100%",flexShrink:0,fontSize:"20px"},children:"Worked with staff"})}),e.jsxs(R,{children:[x!==null?e.jsxs($,{children:[e.jsxs(D,{expandIcon:e.jsx(I,{}),"aria-controls":"panel1-content",id:"panel1-header",className:"text-[24px]",children:[e.jsx(v,{variant:"h3",sx:{width:"33%",flexShrink:0,fontSize:"20px"},children:"Sale staff"}),e.jsx(v,{sx:{color:"text.secondary"},children:e.jsx(F,{to:"/chat",children:e.jsx(T,{variant:"contained",onClick:b=>{b.stopPropagation(),Q(g,x.usersId)},children:"Chat with sale staff"})})})]}),e.jsx(R,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:x.image!=null?x.image:"https://img.freepik.com/free-psd/3d-illustration-person-with-sunglasses_23-2149436188.jpg?size=338&ext=jpg&ga=GA1.1.1141335507.1719273600&semt=ais_user",className:"w-[150px] rounded-full",alt:"Sale staff image"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-[20px]",children:["Sale staff name: ",x.name]}),e.jsxs("h4",{children:["Email: ",x.email]})]})]})})]}):null,l!==null?e.jsxs($,{children:[e.jsxs(D,{expandIcon:e.jsx(I,{}),"aria-controls":"panel1-content",id:"panel1-header",className:"text-[24px]",children:[e.jsx(v,{variant:"h3",sx:{width:"33%",flexShrink:0,fontSize:"20px"},children:"Design staff"}),e.jsx(v,{sx:{color:"text.secondary"},children:e.jsx(F,{to:"/chat",children:e.jsx(T,{variant:"contained",onClick:b=>{b.stopPropagation(),Q(g,l.usersId)},children:"Chat with design staff"})})})]}),e.jsx(R,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:l.image!=null?l.image:"https://img.freepik.com/free-psd/3d-illustration-person-with-sunglasses_23-2149436188.jpg?size=338&ext=jpg&ga=GA1.1.1141335507.1719273600&semt=ais_user",className:"w-[150px] rounded-full",alt:"Sale staff image"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-[20px]",children:["Design staff name: ",l.name]}),e.jsxs("h4",{children:["Email: ",l.email]})]})]})})]}):null,l!==null?e.jsxs($,{children:[e.jsxs(D,{expandIcon:e.jsx(I,{}),"aria-controls":"panel1-content",id:"panel1-header",className:"text-[24px]",children:[e.jsx(v,{variant:"h3",sx:{width:"33%",flexShrink:0,fontSize:"20px"},children:"Production staff"}),e.jsx(v,{sx:{color:"text.secondary"},children:e.jsx(F,{to:"/chat",children:e.jsx(T,{variant:"contained",onClick:b=>{b.stopPropagation(),Q(g,o.usersId)},children:"Chat with Production staff"})})})]}),e.jsx(R,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:o.image!=null?o.image:"https://img.freepik.com/free-psd/3d-illustration-person-with-sunglasses_23-2149436188.jpg?size=338&ext=jpg&ga=GA1.1.1141335507.1719273600&semt=ais_user",className:"w-[150px] rounded-full",alt:"production staff image"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-[20px]",children:["Sale staff name: ",o.name]}),e.jsxs("h4",{children:["Email: ",o.email]})]})]})})]}):null]})]})]})})}function St(){const{total:s,requirementDetail:t,designDetail:r,payNow:a,status:n,setStatus:l}=u.useContext(ce),[d,o]=u.useState("");u.useEffect(()=>{switch(n){case"-1":o("Your order has been canceled");break;case"-2":o("Please contact with sale in chat system");break;case"-3":o("Waiting for the next price quote");break;case"3":o("Confirm the price quote");break;case"4":o("Deposit the order");break;case"5":o("Waiting for design staff receive your order");break;case"6":o("Working with design staff");break;case"7":o("Confirm the sketch design");break;case"-7":o("Waiting for the design staff to redraw");break;case"8":o("Waiting for production staff receive your order");break;case"9":o("Working with production staff");break;case"10":o("Your requirement has been fulfilled, please pay the rest to receive the product");break;case"11":o("Waiting for add the warranty to your requirement");break;case"12":o("Your requirement has been successfully completed");break}},[n]);function c({setStatus:x,status:i,moneyWillPay:f,designDetail:m,title:p,requirementDetail:h,total:g}){switch(console.log(i),i){case"-1":return e.jsx(jt,{title:p});case"-2":return e.jsx(he,{designDetail:m,title:p,requirementDetail:h,total:g,status:i});case"-3":return e.jsx(he,{designDetail:m,title:p,requirementDetail:h,total:g,status:i});case"3":return e.jsx(Te,{setStatus:x,status:i,designDetail:m,title:p,requirementDetail:h,total:g});case"4":return e.jsx(ze,{status:i,designDetail:m,title:p,requirementDetail:h,total:g});case"5":return e.jsx(Ae,{status:i,designDetail:m,title:p,requirementDetail:h,total:g});case"6":return e.jsx(Ae,{status:i,designDetail:m,title:p,requirementDetail:h,total:g});case"7":return e.jsx(Te,{setStatus:x,status:i,designDetail:m,title:p,requirementDetail:h,total:g});case"-7":return e.jsx(he,{designDetail:m,title:p,requirementDetail:h,total:g,status:i});case"8":return e.jsx(Fe,{designDetail:m,title:p,requirementDetail:h,total:g,status:i});case"9":return e.jsx(Fe,{designDetail:m,title:p,requirementDetail:h,total:g,status:i});case"10":return e.jsx(ze,{status:i,designDetail:m,title:p,requirementDetail:h,total:g});case"11":return e.jsx(Be,{status:i,designDetail:m,title:p,requirementDetail:h});case"12":return e.jsx(Be,{status:i,designDetail:m,title:p,requirementDetail:h});default:return e.jsx("div",{})}}return e.jsx(c,{setStatus:l,status:n,moneyWillPay:Math.ceil(s/2),designDetail:r,title:d,requirementDetail:t,total:s})}function Ct(){var a,n,l,d,o,c,x,i,f,m,p,h,g,w;const{requirementDetail:s,designDetail:t,ChangeToggle:r}=u.useContext(ce);return e.jsx(U.div,{children:e.jsxs("div",{className:"grid grid-cols-6 h-screen",children:[e.jsx("div",{className:"col-span-4 bg-gray-500 flex justify-center items-center",children:e.jsxs("div",{className:"min-h-[350px] max-h-1/2 max-w-[800px]",children:[e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx(Ss,{title:"back",sx:{},children:e.jsx(Cs,{onClick:()=>{r()},children:e.jsx(Ze,{sx:{fontSize:"30px"}})})}),e.jsxs("h3",{className:"text-white text-[32px] font-bold mb-3",children:["Order #",s.requirementId," detail:"]})]}),e.jsxs("div",{children:[e.jsxs($,{defaultExpanded:!0,children:[e.jsx(D,{expandIcon:e.jsx(I,{}),"aria-controls":"panel1-content",id:"panel1-header",children:"Design information"}),e.jsx(R,{children:e.jsxs(U.div,{initial:{opacity:0,y:15},transition:"ease in",whileInView:{opacity:1,y:0},className:"grid grid-cols-5 w-full gap-3",children:[e.jsx("div",{className:"image col-span-1",children:e.jsx("img",{src:t.image,className:"w-full object-cover",alt:"image "+t.designName})}),e.jsxs("div",{className:"image col-span-4",children:[e.jsx("h3",{className:"text-[24px] font-semibold",children:t.designName}),e.jsxs("p",{className:"line-clamp-2",children:["Description: ",t.description]}),e.jsx("p",{className:"border-b pt-3 pb-2"}),e.jsxs("p",{className:"font-bold",children:["Size of jewellery: ",s.size]})]})]})})]}),t.masterGemstone!=null?e.jsxs($,{children:[e.jsx(D,{expandIcon:e.jsx(I,{}),"aria-controls":"panel2-content",id:"panel2-header",children:"Master Gemstone"}),e.jsx(R,{children:e.jsxs(U.div,{initial:{opacity:0,y:15},transition:"ease in",whileInView:{opacity:1,y:0},className:"grid grid-cols-5 w-full gap-3",children:[e.jsx("div",{className:"image col-span-1",children:e.jsx("img",{src:(a=t.masterGemstone)==null?void 0:a.image,className:"w-full object-contain h-[100px]",alt:"image "+((n=t.masterGemstone)==null?void 0:n.kind)})}),e.jsxs("div",{className:"image col-span-4",children:[e.jsx("h3",{className:"text-[24px] font-semibold",children:(l=t.masterGemstone)==null?void 0:l.kind}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsxs("p",{className:"",children:["Size: ",(d=t.masterGemstone)==null?void 0:d.size]}),e.jsxs("p",{className:"",children:["Clarity: ",(o=t.masterGemstone)==null?void 0:o.clarity]}),e.jsxs("p",{className:"",children:["Shape: ",(c=t.masterGemstone)==null?void 0:c.shape," "]}),e.jsxs("p",{className:"",children:["Cut: ",(x=t.masterGemstone)==null?void 0:x.cut," "]})]})]})]})})]}):null,t.stone!=null?e.jsxs($,{children:[e.jsx(D,{expandIcon:e.jsx(I,{}),"aria-controls":"panel2-content",children:"Melee stones"}),e.jsx(R,{children:e.jsx(U.div,{initial:{opacity:0,y:15},transition:"ease in",whileInView:{opacity:1,y:0},className:"grid grid-cols-5 w-full gap-3",children:e.jsxs("div",{className:"image col-span-5",children:[e.jsx("h3",{className:"text-[24px] font-semibold",children:(i=t.stone)==null?void 0:i.kind}),e.jsxs("p",{className:"line-clamp-2",children:["Size: ",(f=t.stone)==null?void 0:f.size," mm"]}),e.jsxs("p",{className:"line-clamp-2",children:["Quantity: ",(m=t.stone)==null?void 0:m.quantity]})]})})})]}):null,e.jsxs($,{children:[e.jsx(D,{expandIcon:e.jsx(I,{}),"aria-controls":"panel2-content",children:"Material for jewellery"}),e.jsx(R,{children:e.jsxs(U.div,{initial:{opacity:0,y:15},transition:"ease in",whileInView:{opacity:1,y:0},className:"grid grid-cols-5 w-full gap-3",children:[e.jsx("div",{className:"image col-span-1",children:e.jsx("img",{src:(p=t.material)==null?void 0:p.image,className:"w-full object-contain h-[100px]",alt:"image "+((h=t.masterGemstone)==null?void 0:h.image)})}),e.jsxs("div",{className:"image col-span-4",children:[e.jsx("h3",{className:"text-[24px] font-semibold",children:(g=t.material)==null?void 0:g.name}),e.jsxs("p",{className:"line-clamp-2",children:["Weight of material: ",s.weightOfMaterial," mace"]}),e.jsxs("p",{className:"line-clamp-2",children:["price: ",(w=t.material)==null?void 0:w.price," $ / mace"]})]})]})})]})]})]})}),e.jsx(St,{})]})})}function kt({requirementDetail:s,ChangeToggle:t,status:r,setStatus:a}){return e.jsx(vt,{requirementData:s,ChangeToggle:t,status:r,setStatus:a,children:e.jsx(Ct,{})})}const Je=()=>{var Pe;const[s,t]=u.useState(!1),[r,a]=u.useState(null),[n,l]=u.useState(null),[d,o]=u.useState({}),[c,x]=u.useState({}),{id:i}=is(),{UserId:f}=O(),[m,p]=u.useState(!1),[h,g]=u.useState(!1),[w,N]=u.useState(0),[C,k]=u.useState(""),[b,G]=u.useState(!0),[W,q]=ls.useState(!1),[z,_]=u.useState(!1),E=()=>{q(!0)},Ce=()=>{q(!1)},Xe=()=>{q(!1),es(d),_(!z)},es=async y=>{await J({...y,status:"-1"},"Cancel order completed","Failed to cancel the order"),N("-1")};u.useEffect(()=>{ke(i,f)},[z]);const ke=async(y,S)=>{try{const P=await os(y,S);P!=null?(g(!0),o(P),N(P.status),k(Se(P.status))):g(!1),G(!1)}catch(P){console.error("Failed to fetch requirement:",P)}},ss=Ne(C),ts=[e.jsx(_e,{underline:"hover",color:"inherit",href:"/",children:"Home"},"1"),e.jsx(_e,{underline:"hover",color:"inherit",href:"/my-order/",children:"My Order"},"2"),e.jsxs(v,{color:"text.primary",children:["Requirement #",i]},"3")];u.useEffect(()=>{i&&ke(i,f)},[i]);const rs=()=>{t(!s)},as=async y=>{try{const S=await ms(y);console.log("Fetched design response:",S),x(S),S.masterGemstone&&a(S.masterGemstone),S.stone&&l(S.stone)}catch(S){console.error("Failed to fetch design:",S)}};u.useEffect(()=>{d.designId&&(console.log("Fetching design for designId:",d.designId),as(d.designId))},[d.designId]),console.log("dataDesign:",c),console.log("masterGemStone:",r),console.log("stone:",n);function Me(){p(!m)}return b?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(zs,{})}):h?e.jsxs("div",{children:[e.jsx("div",{className:"w-3/5 mx-auto mt-6 mb-4",children:e.jsx(Le,{spacing:2,children:e.jsx(Oe,{separator:e.jsx(Ee,{fontSize:"small"}),"aria-label":"breadcrumb",children:ts})})}),m?e.jsx("div",{children:e.jsx(kt,{requirementDetail:d,ChangeToggle:Me,status:w,setStatus:N})}):e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs("div",{className:"w-3/5",style:{position:"relative"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},className:"justify-between mb-6 items-center content-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx(v,{variant:"h5",gutterBottom:!0,children:"Requirement Details"}),e.jsx("span",{className:"py-0.5 shadow-lg text-sm text-center rounded-full "+ss,children:C})]}),e.jsxs("div",{className:"flex flex-col justify-center items-end",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(T,{variant:"outlined",color:"error",onClick:E,disabled:!(d.status>=0&&d.status<=4),children:"Cancel order"}),e.jsx(T,{variant:"contained",disabled:d.status>=0&&d.status<3,sx:{width:"fit-content"},onClick:Me,children:"Track order"})]}),d.status>=0&&d.status<3?null:e.jsx("span",{className:"pb-3",children:"Tracking order will allow after sale staff contact with you"})]})]}),e.jsx(qe,{container:!0,spacing:3,className:"mb-4",children:Object.entries(d).filter(([y])=>y!=="design3D"&&y!=="materialPriceAtMoment"&&y!=="stonePriceAtMoment"&&y!=="machiningFee"&&y!=="status"&&y!=="masterGemStonePriceAtMoment"&&y!=="designId").map(([y,S])=>e.jsx(qe,{item:!0,xs:12,sm:6,children:e.jsxs(v,{variant:"body1",children:[e.jsxs("strong",{children:[y.replace(/([A-Z])/g," $1").replace(/^./,P=>P.toUpperCase()),":"]})," ",S]})},y))}),e.jsxs("div",{className:"flex flex-row flex-wrap mt-6 mb-4",children:[e.jsxs("div",{className:"flex-1 flex flex-col items-center bg-blue-100 rounded-lg p-2 mb-2",children:[e.jsx(v,{variant:"h6",gutterBottom:!0,children:"Master Gemstone"}),(r==null?void 0:r.image)&&e.jsx("img",{src:r.image,alt:r.kind,className:"w-full max-w-md h-[300px] object-contain",style:{maxWidth:"250px"}}),e.jsx(xe,{component:de,className:"mt-2",children:e.jsx(me,{children:e.jsx(ue,{children:r&&Object.entries(r).filter(([y])=>y!=="image"&&y!=="masterGemstoneId").map(([y,S])=>e.jsxs(pe,{children:[e.jsx(V,{children:e.jsx("strong",{children:y.replace(/([A-Z])/g," $1").replace(/^./,P=>P.toUpperCase())})}),e.jsx(V,{children:S})]},y))})})})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center bg-yellow-100 rounded-lg p-2 mb-2 mx-2",children:[e.jsx(v,{variant:"h6",gutterBottom:!0,children:"Material"}),((Pe=c==null?void 0:c.material)==null?void 0:Pe.image)&&e.jsx("img",{src:c.material.image,alt:c.material.name,className:"w-full max-w-md h-[300px] object-contain",style:{maxWidth:"250px"}}),e.jsx(xe,{component:de,className:"mt-2",children:e.jsx(me,{children:e.jsx(ue,{children:c.material&&Object.entries(c.material).filter(([y])=>y!=="image").map(([y,S])=>e.jsxs(pe,{children:[e.jsx(V,{children:e.jsx("strong",{children:y.replace(/([A-Z])/g," $1").replace(/^./,P=>P.toUpperCase())})}),e.jsx(V,{children:S})]},y))})})})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center bg-green-100 rounded-lg p-2 mb-2",children:[e.jsx(v,{variant:"h6",gutterBottom:!0,children:"Melee Stones"}),e.jsx(xe,{component:de,className:"mt-2",children:e.jsx(me,{children:e.jsx(ue,{children:n&&Object.entries(n).filter(([y])=>y!=="stoneId").map(([y,S])=>e.jsxs(pe,{children:[e.jsx(V,{children:e.jsx("strong",{children:y.replace(/([A-Z])/g," $1").replace(/^./,P=>P.toUpperCase())})}),e.jsx(V,{children:S})]},y))})})})]})]}),s&&e.jsx("div",{className:"mt-2",style:{position:"absolute",top:0,right:0,width:"20%",maxWidth:"250px",cursor:"pointer"},onClick:rs,children:e.jsx("img",{src:d.design3D,alt:"3D Design",className:"w-full h-auto max-w-3xl"})})]})}),e.jsxs(ys,{open:W,onClose:Ce,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(ws,{id:"alert-dialog-title",children:"Cancel this order?"}),e.jsx(vs,{children:e.jsx(Es,{id:"alert-dialog-description",children:"After clicking the Agree button, the order will be cancel and you can't restore."})}),e.jsxs(Ns,{children:[e.jsx(T,{onClick:Ce,children:"Disagree"}),e.jsx(T,{onClick:Xe,color:"error",autoFocus:!0,children:"Agree"})]})]})]}):e.jsx(ks,{})},sr=Object.freeze(Object.defineProperty({__proto__:null,default:Je},Symbol.toStringTag,{value:"Module"})),Qe=[{code:-1,label:"Canceled order"},{code:0,label:"Waiting for sale receive"},{code:1,label:"Waiting for sale contact you in chat system"},{code:2,label:"Sale has sent your requirement to manager to quote price"},{code:-2,label:"Please check the chat system to contact with sale staff"},{code:3,label:"Confirm the price quote"},{code:-3,label:"Waiting for manager quote price again"},{code:4,label:"Deposit the order"},{code:5,label:"Waiting for design staff"},{code:6,label:"Working with design staff"},{code:7,label:"Confirm the design"},{code:-7,label:"Waiting for design staff redraw"},{code:8,label:"Waiting for production staff receive"},{code:9,label:"working with production staff"},{code:10,label:"Product completed. Please pay the rest."},{code:11,label:"Your order are waiting for adding warranty card"},{code:12,label:"Successfully Completed"}],Ne=s=>{switch(s){case"Canceled order":return"bg-red-600 text-red-100";case"Waiting for sale receive":return"bg-yellow-100 text-yellow-600";case"Waiting for sale contact you in chat system":return"bg-yellow-100 text-yellow-600";case"Please check the chat system to contact with sale staff":return"bg-yellow-200 text-yellow-800";case"Sale has sent your requirement to manager to quote price":return"bg-yellow-100 text-yellow-600";case"Confirm the price quote":return"bg-green-100 text-green-600";case"Waiting for manager quote price again":return"bg-yellow-100 text-yellow-600";case"Deposit the order":return"bg-green-100 text-green-600";case"Waiting for design staff":return"bg-yellow-100 text-yellow-600";case"Working with design staff":return"bg-yellow-100 text-yellow-600";case"Confirm the design":return"bg-green-100 text-green-600";case"Waiting for design staff redraw":return"bg-yellow-100 text-yellow-600";case"Waiting for production staff receive":return"bg-yellow-100 text-yellow-600";case"working with production staff":return"bg-yellow-100 text-yellow-600";case"Product completed. Please pay the rest.":return"bg-green-100 text-green-600";case"Your order are waiting for adding warranty card":return"bg-yellow-100 text-yellow-600";case"Successfully Completed":return"bg-green-100 text-green-600";default:return"bg-gray-100 text-gray-600"}},Se=s=>{const t=Qe.find(r=>r.code==s);return t?t.label:"Unknown status"};function Mt(){const[s,t]=u.useState([]),[r,a]=u.useState(null),{UserId:n}=O(),l=[e.jsx(F,{underline:"hover",color:"inherit",to:"/",children:"Home"},"1"),e.jsx(v,{color:"text.primary",children:"My Order"},"2")];u.useEffect(()=>{n&&d(n)},[n]);const d=async o=>{try{const c=await dt(o),x=await Promise.all(c.map(async i=>await cs(i.requirementId)));t(x)}catch(c){console.error("Failed to fetch requirements:",c)}};return console.log(r),e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("div",{className:"mb-4 mt-6",children:e.jsx(Le,{spacing:2,children:e.jsx(Oe,{separator:e.jsx(Ee,{fontSize:"small"}),"aria-label":"breadcrumb",children:l})})}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Orders List"}),r?e.jsx(Je,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gray-100 text-gray-600 uppercase text-sm leading-normal p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("p",{className:"md:w-1/4 py-2 px-4",children:"Number"}),e.jsx("p",{className:"md:w-1/4 py-2 px-4",children:"Created Date"}),e.jsx("p",{className:"md:w-1/4 py-2 px-4",children:"Status"}),e.jsx("p",{className:"md:w-1/4 py-2 px-4"})]})}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:s.map((o,c)=>e.jsx(F,{to:`/my-order/${o.requirementId}`,children:e.jsx(xt,{data:o,index:c+1,onViewDetail:()=>a(o)})},o.requirementId))})]})]})}const tr=Object.freeze(Object.defineProperty({__proto__:null,default:Mt,getStatusClass:Ne,getStatusCustomerByCode:Se,statusOptionCustomer:Qe},Symbol.toStringTag,{value:"Module"}));export{Es as D,sr as O,Se as a,tr as b,Ze as d,Ne as g};
