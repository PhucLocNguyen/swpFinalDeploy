import{B as b,r as d,j as e}from"./index-VGU-9NUU.js";import{d as T}from"./Add-BQ9hSIbB.js";import{d as V}from"./Search-DMxefNFZ.js";import{a as y}from"./instance-DZS3_tzi.js";import{a as S}from"./AxiosConfigHeader-CNHt4vQr.js";import{d as H}from"./MoreVert-CPftJ48K.js";import{I as G}from"./IconButton-DWvNdrqB.js";import{P as R}from"./Select-l-UczRZW.js";import{M as I}from"./MenuItem-DiE26UUh.js";import{d as F}from"./Close-8usF18cr.js";import{m as q}from"./motion-ChqZ_GeW.js";import{T as g}from"./TextField-BbW75Pm-.js";import{B as w}from"./Button-1sJCo5hQ.js";import{I as B}from"./InputAdornment-CIaPP71f.js";import{S as _}from"./Stack-lgF4DL-X.js";import{P as $}from"./Pagination-BT4a4nk-.js";import"./styled-C3jJ_e4t.js";import"./createSvgIcon-Bust3YDQ.js";import"./createSvgIcon-lFuL9lUi.js";import"./useId-S08-fgGb.js";import"./useIsFocusVisible-DwfdVPIc.js";import"./useControlled-uWKHelS5.js";import"./ButtonBase-CTLfAVod.js";import"./mergeSlotProps-CMtaL82j.js";import"./index-DxwPS3vl.js";import"./Grow-pPlLCpGJ.js";import"./Typography-q_9hv_ih.js";const E=async({pageSize:t,page:s})=>{try{return(await y.get("/Stones",{axiosConfigHeader:S,params:{pageIndex:s,pageSize:t}})).data}catch(o){console.log(">>>API Get Stone : ",o)}},K=async({formData:t})=>{try{const s=await y.post("/Stones",t,S);b.success("Create success")}catch(s){console.log(">>>API Create Stone : ",s),b.error("Data already exists")}},Q=async({id:t,formData:s})=>{try{const o=await y.put("/Stones",s,{axiosConfigHeader:S,params:{id:t}});b.success("Update Success")}catch(o){console.log(">>> Api Update Stone : ",o)}},W=async t=>{try{const s=await y.delete("/Stones",{axiosConfigHeader:S,params:{id:t}});(s==null?void 0:s.status)==200&&b.success("Deleted successfully")}catch(s){console.log(">>> Api Delete Stone : ",s),b.error("Delete failure")}};function X({data:t,setItemUpdate:s,setIsOpenUpdatePopup:o,setIsDelete:i,isDelete:x}){const[a,u]=d.useState(null),c=m=>{u(m.currentTarget)},n=()=>{u(null)},r=async()=>{let m=t==null?void 0:t.stonesId;await W(m)},l=async()=>{await r(),n(),i(!x)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-5 gap-x-[1rem] py-[1rem] px-[2.25rem] border-t-[1px] border-solid border-[#e9eaf3] cursor-pointer",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"text-[14px] font-medium tracking-[0.06em] leading-[1.167em]",children:t==null?void 0:t.kind})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"text-[14px] font-medium tracking-[0.06em] leading-[1.167em]",children:t==null?void 0:t.size})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"text-[14px] font-medium tracking-[0.06em] leading-[1.167em]",children:t==null?void 0:t.quantity})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"text-[14px] font-medium tracking-[0.06em] leading-[1.167em]",children:t==null?void 0:t.price})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(G,{onClick:c,children:e.jsx(H,{})})})]}),e.jsxs(R,{open:!!a,anchorEl:a,onClose:n,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsx(I,{onClick:()=>{o(!0),s(t),n()},children:"Update Price"}),e.jsx(I,{onClick:l,sx:{color:"error.main"},children:"Delete"})]})]})}function Z({setIsOpenPopup:t}){const[s,o]=d.useState({kind:"",size:"",quantity:"",price:""}),[i,x]=d.useState({kind:"",size:"",quantity:"",price:""}),a=c=>{const{name:n,value:r}=c.target;let l="",m=!0;try{if(n==="size"||n==="quantity"||n==="price"){l="Input must be number greater than 0";const h=Number(r);(h>0&&!isNaN(h)||r==="")&&(m=!1)}else{l="This field cannot be blank";const h=Number(r);!isNaN(h)&&r!==""&&(l="This field cannot a number"),r!==""&&isNaN(h)&&(m=!1)}}catch{m=!0}o({...s,[n]:r}),x({...i,[n]:m?l:""})},u=async()=>{let c=!0,n={};Object.keys(i).forEach(r=>{i[r]!==""&&(c=!1)}),Object.keys(s).forEach(r=>{s[r]===""&&(n[r]="This field cannot be blank",c=!1)}),x(n),console.log(">>> Check success: ",c),c&&(await(async()=>{await K({formData:s})})(),t(!1))};return console.log(s),e.jsx(e.Fragment,{children:e.jsx("div",{onClick:()=>t(!1),className:"fixed top-0 right-0 left-0 bottom-0 bg-[rgba(0,0,0,0.6)] flex items-center justify-center",children:e.jsxs(q.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1,transition:{duration:.5}},onClick:c=>c.stopPropagation(),className:"bg-[#fff] w-[40rem] rounded-[10px] min-h-[350px]",children:[e.jsxs("div",{className:"relative text-center border-b-[1px] border-solid border-[#333] px-[1rem] py-[1rem] ",children:[e.jsx("h1",{className:"font-bold leading-5 text-[1.5rem]",children:"Add New Gemstone"}),e.jsx("div",{onClick:()=>t(!1),className:"absolute top-[10px] right-[10px] cursor-pointer",children:e.jsx(F,{})})]}),e.jsxs("div",{className:"px-[1rem] py-[1rem]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"w-[47%]",children:[e.jsx("h2",{className:"text-[1.1rem] font-medium pb-[3px]",children:"Kind"}),e.jsx("div",{children:e.jsx(g,{name:"kind",onChange:a,error:!!i.kind,helperText:i==null?void 0:i.kind,style:{width:"100%"},placeholder:"CZ",id:"outlined-basic",variant:"outlined",size:"small",sx:{minHeight:"4rem"}})})]}),e.jsxs("div",{className:"w-[47%]",children:[e.jsx("h2",{className:"text-[1.1rem] font-medium pb-[3px]",children:"Size"}),e.jsx("div",{children:e.jsx(g,{name:"size",onChange:a,error:!!i.size,helperText:i==null?void 0:i.size,style:{width:"100%"},placeholder:"5",id:"outlined-basic",variant:"outlined",size:"small",sx:{minHeight:"4rem"}})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"w-[47%]",children:[e.jsx("h2",{className:"text-[1.1rem] font-medium pb-[3px]",children:"Quantity"}),e.jsx("div",{children:e.jsx(g,{name:"quantity",onChange:a,error:!!i.quantity,helperText:i==null?void 0:i.quantity,style:{width:"100%"},placeholder:"IF",id:"outlined-basic",variant:"outlined",size:"small",sx:{minHeight:"4rem"}})})]}),e.jsxs("div",{className:"w-[47%]",children:[e.jsx("h2",{className:"text-[1.1rem] font-medium pb-[3px]",children:"Price"}),e.jsx("div",{children:e.jsx(g,{name:"price",onChange:a,error:!!i.price,helperText:i==null?void 0:i.price,style:{width:"100%"},id:"outlined-basic",placeholder:"EX",variant:"outlined",size:"small",sx:{minHeight:"4rem"}})})]})]}),e.jsx("div",{className:"mt-[1rem]",children:e.jsxs(w,{onClick:u,variant:"contained",sx:{minWidth:"6rem"},children:[e.jsx(T,{fontSize:"small",sx:{marginRight:"8px"}}),"Add"]})})]})]})})})}function J({data:t,setIsOpenUpdatePopup:s}){const[o,i]=d.useState({kind:t==null?void 0:t.kind,size:t==null?void 0:t.size,quantity:t==null?void 0:t.quantity,price:""}),[x,a]=d.useState({kind:"",size:"",quantity:"",price:""}),u=n=>{const{name:r,value:l}=n.target;let m="",h=!0;try{if(r==="price"){m="Input must be number greater than 0";const f=Number(l);f>0&&!isNaN(f)&&(h=!1)}}catch{h=!0}i({...o,[r]:l}),a({...x,[r]:h?m:""})},c=async()=>{let n=!0,r={};if(Object.keys(x).forEach(l=>{x[l]!==""&&(n=!1)}),Object.keys(o).forEach(l=>{o[l]===""&&(r[l]="This field cannot be blank",n=!1)}),a(r),n){let l=t==null?void 0:t.stonesId;await(async()=>{await Q({id:l,formData:o})})(),s(!1)}};return e.jsx(e.Fragment,{children:e.jsx("div",{onClick:()=>s(!1),className:"fixed top-0 right-0 left-0 bottom-0 bg-[rgba(0,0,0,0.6)] flex items-center justify-center",children:e.jsxs(q.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1,transition:{duration:.5}},onClick:n=>n.stopPropagation(),className:"bg-[#fff] w-[30rem] rounded-[10px] min-h-[250px]",children:[e.jsxs("div",{className:"relative text-center border-b-[1px] border-solid border-[#333] px-[1rem] py-[1rem] ",children:[e.jsx("h1",{className:"font-bold leading-5 text-[1.5rem]",children:"Update Price"}),e.jsx("div",{onClick:()=>s(!1),className:"absolute top-[10px] right-[10px] cursor-pointer",children:e.jsx(F,{})})]}),e.jsxs("div",{className:"px-[1rem] py-[1rem]",children:[e.jsx("h2",{className:"text-[1.1rem] font-medium pb-[3px]",children:"Price"}),e.jsx("div",{children:e.jsx(g,{name:"price",onChange:u,error:!!x.price,helperText:x==null?void 0:x.price,style:{width:"100%"},placeholder:"Dimond",id:"outlined-basic",variant:"outlined",size:"small",sx:{minHeight:"5.5rem"}})}),e.jsx("div",{className:"mt-[1rem]",children:e.jsx(w,{onClick:c,variant:"contained",sx:{minWidth:"6rem"},children:"Update"})})]})]})})})}function ke(){const[s,o]=d.useState(!1),[i,x]=d.useState([]),[a,u]=d.useState(""),[c,n]=d.useState(!1),[r,l]=d.useState(),[m,h]=d.useState(!1),[f,k]=d.useState(1),[O,z]=d.useState(0),[C,P]=d.useState(1),A=async()=>{const p=await E({pageSize:6,page:C});x(p)},D=async()=>{const p=await E({});return z(p==null?void 0:p.length),p};d.useEffect(()=>{a===""&&A(),D()},[C,s,c,m]),d.useEffect(()=>{let p=[];a===""&&(P(1),A()),(async()=>{p=await D();const N=p.filter(v=>v.kind.toLowerCase().includes(a.toLowerCase())||v.size.toString().toLowerCase().includes(a.toLowerCase())||v.price.toString().toLowerCase().includes(a.toLowerCase())||v.quantity.toString().toLowerCase().includes(a.toLowerCase())),U=N.slice((f-1)*6,f*6);x(U),z(N==null?void 0:N.length)})()},[a,f,c,m]);const L=(p,j)=>{a===""?P(j):k(j)},M=p=>{u(p.target.value),k(1)};return console.log(a),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-[100vh] py-[3rem] px-[3rem] bg-[#f7f9fc]",children:[e.jsx("div",{className:"w-[100%] min-h-[600px]",children:e.jsxs("div",{className:"rounded-[30px] border-[1px] border-solid border-[#e9eaf3] bg-[white]",children:[e.jsxs("div",{className:"py-[1.75rem] px-[2.25rem] flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center ",children:[e.jsx("h2",{className:"mr-5 font-bold text-[1.5rem] leading-[1.125em]",children:"All Melee Stones"}),e.jsx(g,{onChange:M,value:a,id:"outlined-basic",placeholder:"Search...",variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:"30px"},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"30px"}},InputProps:{startAdornment:e.jsx(B,{position:"start",children:e.jsx(V,{})})}})]}),e.jsx(w,{onClick:()=>o(!0),startIcon:e.jsx(T,{}),variant:"contained",children:"New Melee Stones"})]}),e.jsxs("div",{className:"bg-[#f7f9fc] grid grid-cols-5 gap-x-[1rem] py-[1rem] px-[2.25rem] border-t-[1px] border-solid border-[#e9eaf3]",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"text-[1rem] font-medium tracking-[0.06em] leading-[1.167em]",children:"Kind"})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"text-[1rem] font-medium tracking-[0.06em] leading-[1.167em]",children:"Size"})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"text-[1rem] font-medium tracking-[0.06em] leading-[1.167em]",children:"Quantity"})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"text-[1rem] font-medium tracking-[0.06em] leading-[1.167em]",children:"Price"})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"text-[1rem] font-medium tracking-[0.06em] leading-[1.167em]"})})]}),i==null?void 0:i.map((p,j)=>e.jsx(X,{data:p,setIsOpenUpdatePopup:n,setItemUpdate:l,isDelete:m,setIsDelete:h},j))]})}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(_,{children:e.jsx($,{count:Math.ceil(O/6)||0,page:a===""?C:f,onChange:L})})})]}),s&&e.jsx(Z,{setIsOpenPopup:o}),c&&e.jsx(J,{setIsOpenUpdatePopup:n,data:r})]})}export{ke as default};
