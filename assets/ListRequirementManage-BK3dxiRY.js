import{r as o,j as e}from"./index-DWozRySs.js";import{d as F,g as R,a as N,D as G}from"./OrderCustomer-i21Wew2H.js";import{F as W}from"./FetchApiDesign-Bf2vjSNd.js";import{d as z}from"./ArrowDropDown-Cr9vfq-i.js";import{P as B}from"./PutApiRequirement-DCQgRt3H.js";import{f as J}from"./FormatCurrency-ClX-n8WG.js";import{m as M}from"./motion-CV68TVvv.js";import{T as E}from"./Tooltip-veb6O8hH.js";import{I as U}from"./IconButton-BfZGExQz.js";import{A as I,a as P,b as O}from"./AccordionSummary-f47a2KWv.js";import{T as j}from"./Typography-BBIY9fNW.js";import{B as y}from"./Button-Bcful5Tm.js";import{D as V,a as K,b as L,c as Q}from"./ApiChangeWarranty-DyCiG2is.js";import{A as T}from"./ListRequirement-CjxzQtnB.js";import{S as _}from"./Stack-DtaVED0n.js";import{P as $}from"./Pagination-Du-v59ex.js";import"./FetchApiRequirement-DR7fnfCw.js";import"./instance-DZS3_tzi.js";import"./AxiosConfigHeader-CNHt4vQr.js";import"./FetchApiDesign-0YxtH5qw.js";import"./NavigateNext-D3MpA0f_.js";import"./styled-BUrYsluB.js";import"./mergeSlotProps-BDZQvIdA.js";import"./ButtonBase-ztTdquOL.js";import"./useIsFocusVisible-CWAIqHst.js";import"./createSvgIcon-C8KhxkLT.js";import"./Grow-Bh_FwPu_.js";import"./useId-C5pU6Ksv.js";import"./createSvgIcon-e-FyxzSc.js";import"./useControlled-DIh20Rar.js";import"./ExpandMore-s-773MFA.js";import"./Home-CbGUG8lc.js";import"./PaymentApi-CP6OkxmO.js";import"./CreateConversationJoin-jXrej5vW.js";import"./FetchConversation-BnqMLloD.js";import"./PageError-Dh_bV-p8.js";import"./TableRow-lHNjMJZZ.js";import"./index-DBJAgiAh.js";function H({requirement:s,design:r,togglePopup:l,handleUpdateData:d}){var u,v,g,w,S,C,D,k,A;const[n,i]=o.useState(!1),[h,b]=o.useState(!1),[c,f]=o.useState(s),p=()=>{i(!0)},t=()=>{i(!1)},m=a=>{i(!1),x(a),b(!h)},x=async a=>{await B({...a,status:"-1"},"Cancel order completed","Failed to cancel the order"),d(),setStatus("-1")};return e.jsxs(M.div,{initial:{opacity:0,x:10},whileInView:{opacity:1,x:0},className:"absolute w-full z-10 top-0 left-0 right-0 bottom-0 py-[3rem] px-[3rem] h-max bg-[#f7f9fc]",children:[e.jsx(E,{title:"back",sx:{},children:e.jsx(U,{onClick:a=>{a.stopPropagation(),l()},children:e.jsx(F,{sx:{fontSize:"30px"}})})}),e.jsxs("div",{className:"grid grid-cols-3 gap-x-[1.5rem]",children:[e.jsxs("div",{className:"col-span-2 ",children:[e.jsxs("div",{className:"py-[2.5rem] px-[2.5rem] rounded-[30px] border-[1px] border-[#e9eaf3] border-solid bg-[white]",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-[32px] font-bold ",children:["Order #",s.requirementId]}),e.jsx("div",{className:"rounded-full px-2 w-fit "+R(N(c.status)),sx:{fontSize:"14px",fontWeight:400},children:e.jsx("p",{children:N(c.status)})})]}),e.jsx("div",{className:"h-[1.5px] bg-[#e9eaf3] my-[1.5rem]"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-[22px] mb-[1rem] font-bold leading-[1.273em]",children:r==null?void 0:r.designName}),e.jsxs("div",{className:"flex ",children:[e.jsx("img",{className:"w-[15rem] h-[15rem]",src:r==null?void 0:r.image}),e.jsx("p",{className:"ml-[1rem] text-[#6f7182]",children:r==null?void 0:r.description})]})]}),e.jsx("div",{className:"h-[1.5px] bg-[#e9eaf3] my-[1.5rem]"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-[32px] mb-[1rem] font-bold leading-[1.273em]",children:"Customer Requirement"}),e.jsx("h2",{className:"text-[20px] mb-[1rem] font-bold leading-[1.273em]",children:"General Information"}),e.jsxs("table",{className:"table-fixed w-[100%] font-medium overflow-hidden border-collapse border-[1px] border-solid border-[#000]",children:[e.jsx("thead",{className:"bg-[#eccc68] border-[1px] border-solid border-[#000]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-[1rem] py-[0.5rem] text-left border-[1px] border-solid border-[#000]",children:"Jewelry Type"}),e.jsx("th",{className:"px-[1rem] py-[0.5rem] text-left border-[1px] border-solid border-[#000]",children:"Jewelry Size"}),e.jsx("th",{className:"px-[1rem] py-[0.5rem] text-left border-[1px] border-solid border-[#000]",children:"Jewelry Material"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-[1rem] py-[1rem] border-[1px] border-solid border-[#000]",children:(u=r==null?void 0:r.typeOfJewellery)==null?void 0:u.name}),e.jsx("td",{className:"px-[1rem] py-[1rem] border-[1px] border-solid border-[#000]",children:s==null?void 0:s.size}),e.jsx("td",{className:"px-[1rem] py-[1rem] border-[1px] border-solid border-[#000]",children:(v=r==null?void 0:r.material)==null?void 0:v.name})]})})]}),e.jsx("div",{className:"my-[1rem]"}),e.jsx("h2",{className:"text-[20px] mb-[1rem] font-bold leading-[1.273em]",children:"Master Gemstone"}),e.jsxs("table",{className:"table-fixed w-[100%] font-medium overflow-hidden border-collapse border-[1px] border-solid border-[#000]",children:[e.jsx("thead",{className:"bg-[#eccc68] border-[1px] border-solid border-[#000]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-[1rem] py-[0.5rem] text-left border-[1px] border-solid border-[#000]",children:"Kind"}),e.jsx("th",{className:"px-[1rem] py-[0.5rem] text-left border-[1px] border-solid border-[#000]",children:"Size"}),e.jsx("th",{className:"px-[1rem] py-[0.5rem] text-left border-[1px] border-solid border-[#000]",children:"Weight"}),e.jsx("th",{className:"px-[1rem] py-[0.5rem] text-left border-[1px] border-solid border-[#000]",children:"Shape"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-[1rem] py-[1rem] border-[1px] border-solid border-[#000]",children:(g=r==null?void 0:r.masterGemstone)==null?void 0:g.kind}),e.jsx("td",{className:"px-[1rem] py-[1rem] border-[1px] border-solid border-[#000]",children:(w=r==null?void 0:r.masterGemstone)==null?void 0:w.size}),e.jsx("td",{className:"px-[1rem] py-[1rem] border-[1px] border-solid border-[#000]",children:(S=r==null?void 0:r.masterGemstone)==null?void 0:S.weight}),e.jsx("td",{className:"px-[1rem] py-[1rem] border-[1px] border-solid border-[#000]",children:(C=r==null?void 0:r.masterGemstone)==null?void 0:C.shape})]})})]}),e.jsx("div",{className:"my-[1rem]"}),e.jsx("h2",{className:"text-[20px] mb-[1rem] font-bold leading-[1.273em]",children:"Stones"}),e.jsxs("table",{className:"table-fixed w-[100%] font-medium overflow-hidden border-collapse border-[1px] border-solid border-[#000]",children:[e.jsx("thead",{className:"bg-[#eccc68] border-[1px] border-solid border-[#000]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-[1rem] py-[0.5rem] text-left border-[1px] border-solid border-[#000]",children:"Kind"}),e.jsx("th",{className:"px-[1rem] py-[0.5rem] text-left border-[1px] border-solid border-[#000]",children:"Size"}),e.jsx("th",{className:"px-[1rem] py-[0.5rem] text-left border-[1px] border-solid border-[#000]",children:"Quantity"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-[1rem] py-[1rem] border-[1px] border-solid border-[#000]",children:(D=r==null?void 0:r.stone)==null?void 0:D.kind}),e.jsx("td",{className:"px-[1rem] py-[1rem] border-[1px] border-solid border-[#000]",children:(k=r==null?void 0:r.stone)==null?void 0:k.size}),e.jsx("td",{className:"px-[1rem] py-[1rem] border-[1px] border-solid border-[#000]",children:(A=r==null?void 0:r.stone)==null?void 0:A.quantity})]})})]})]})]}),e.jsxs("div",{className:" my-[1.5rem] py-[2.5rem] px-[2.5rem] rounded-[30px] border-[1px] border-[#e9eaf3] border-solid bg-[white]",children:[e.jsx("h2",{className:"text-[22px] mb-[1rem] font-bold leading-[1.273em]",children:"Customer Note"}),e.jsx("p",{className:"text-[#6f7182]",children:s==null?void 0:s.customerNote})]}),e.jsxs("div",{className:"py-[2.5rem] px-[2.5rem] rounded-[30px] border-[1px] border-[#e9eaf3] border-solid bg-[white]",children:[e.jsx("h2",{className:"text-[22px] mb-[1rem] font-bold leading-[1.273em]",children:"Sell Staff Note"}),e.jsx("p",{className:"text-[#6f7182]",children:s==null?void 0:s.staffNote})]})]}),e.jsxs("div",{className:"sticky top-[24px]  py-[2.5rem] px-[2rem] rounded-[30px] border-[1px] border-[#e9eaf3] border-solid bg-[white]",children:[e.jsx("h2",{className:"text-[22px] mb-[1rem] font-bold leading-[1.273em]",children:"Price Quotation"}),e.jsx("div",{className:"h-[1.5px] bg-[#e9eaf3] my-[1.5rem]"}),e.jsxs(I,{children:[e.jsx(P,{expandIcon:e.jsx(z,{}),"aria-controls":"panel2-content",id:"panel2-header",children:e.jsx(j,{sx:{fontWeight:"bold"},children:"Weight of material"})}),e.jsx(O,{children:e.jsx(j,{children:s==null?void 0:s.weightOfMaterial})})]}),e.jsxs(I,{children:[e.jsx(P,{expandIcon:e.jsx(z,{}),"aria-controls":"panel2-content",id:"panel2-header",children:e.jsx(j,{sx:{fontWeight:"bold"},children:"Machining fee"})}),e.jsx(O,{children:e.jsx(j,{children:(s==null?void 0:s.machiningFee)!=null?J(s==null?void 0:s.machiningFee):null})})]}),e.jsx("div",{className:"h-[1.5px] bg-[#e9eaf3] my-[1.5rem]"}),e.jsx("div",{children:e.jsx("div",{className:"mt-[1rem]",children:e.jsx(y,{variant:"outlined",color:"error",disabled:s.status=="-1",onClick:a=>{a.stopPropagation(),p()},children:"Cancel order"})})})]})]}),e.jsxs(V,{open:n,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(K,{id:"alert-dialog-title",children:"Cancel this order?"}),e.jsx(L,{children:e.jsx(G,{id:"alert-dialog-description",children:"After clicking the Agree button, the order will be cancel and you can't restore."})}),e.jsxs(Q,{children:[e.jsx(y,{onClick:t,children:"Disagree"}),e.jsx(y,{onClick:a=>{a.stopPropagation(),m(c)},color:"error",autoFocus:!0,children:"Agree"})]})]})]})}function X({data:s,handleUpdateData:r}){var f;const[l,d]=o.useState(),[n,i]=o.useState(!1),h=s.designId;o.useEffect(()=>{(async()=>{const t=await W(h);d(t)})()},[]);const b=()=>{i(!0)},c=()=>{i(p=>!p)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{onClick:b,className:"grid grid-cols-4 gap-x-[1rem] py-[1rem] px-[2.25rem] border-t-[1px] border-solid border-[#e9eaf3] cursor-pointer",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"text-[14px] font-medium tracking-[0.06em] leading-[1.167em]",children:s.requirementId})}),e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"rounded-full px-2 "+R(N(s.status)),sx:{fontSize:"14px",fontWeight:400},children:e.jsx("p",{children:N(s.status)})})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"text-[14px] font-medium tracking-[0.06em] leading-[1.167em]",children:s.createdDate})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"text-[14px] font-medium tracking-[0.06em] leading-[1.167em]",children:(f=l==null?void 0:l.typeOfJewellery)==null?void 0:f.name})})]}),n&&e.jsx(H,{requirement:s,design:l,togglePopup:c,handleUpdateData:r})]})}function Fe(){const[r,l]=o.useState(1),[d,n]=o.useState([]),[i,h]=o.useState(0),[b,c]=o.useState(!1);function f(){c(t=>!t)}const p=(t,m)=>{l(m)};return o.useEffect(()=>{try{const t=async()=>{const x=await T({pageSize:6,page:r});n(x)},m=async()=>{const x=await T({});h(x==null?void 0:x.length)};t(),m()}catch{n([])}},[r,b]),console.log(d),e.jsxs("div",{className:"min-h-[100vh] py-[3rem] px-[3rem] bg-[#f7f9fc]",children:[e.jsx("div",{className:"w-[100%] min-h-[550px]",children:e.jsxs("div",{className:"rounded-[30px] border-[1px] border-solid border-[#e9eaf3] bg-[white]",children:[e.jsx("div",{className:"py-[1.75rem] px-[2.25rem] flex items-center",children:e.jsx("h2",{className:"font-bold text-[1.5rem] leading-[1.125em]",children:"All Requirement"})}),e.jsxs("div",{className:"bg-[#f7f9fc] grid grid-cols-4 gap-x-[1rem] py-[1rem] px-[2.25rem] border-t-[1px] border-solid border-[#e9eaf3]",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"text-[1rem] font-medium tracking-[0.06em] leading-[1.167em]",children:"Order ID"})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"text-[1rem] font-medium tracking-[0.06em] leading-[1.167em]",children:"Status"})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"text-[1rem] font-medium tracking-[0.06em] leading-[1.167em]",children:"Order Date"})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"text-[1rem] font-medium tracking-[0.06em] leading-[1.167em]",children:"Type"})})]}),d==null?void 0:d.map((t,m)=>e.jsx(X,{data:t,handleUpdateData:f},m))]})}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(_,{children:e.jsx($,{count:Math.ceil(i/6)||0,page:r,onChange:p})})})]})}export{Fe as default};
