import{r as a,j as e,B as G}from"./index-DWozRySs.js";import{d as k}from"./Search-C4KAhZ05.js";import{d as R}from"./MoreVert-BAiDkQyM.js";import{I}from"./IconButton-BfZGExQz.js";import{P as O}from"./Select-D4jnfiOn.js";import{M as L}from"./MenuItem-0gOXkRvp.js";import{d as P}from"./Close-CfBsvzH5.js";import{d as A}from"./ExpandMore-s-773MFA.js";import{a as y}from"./instance-DZS3_tzi.js";import{a as b}from"./AxiosConfigHeader-CNHt4vQr.js";import{m as F}from"./motion-CV68TVvv.js";import{A as T,a as U,b as E}from"./AccordionSummary-f47a2KWv.js";import{T as g}from"./TextField-DV5y66jx.js";import{B as H}from"./Button-Bcful5Tm.js";import{I as W}from"./InputAdornment-DV9jsepP.js";import{S as $}from"./Stack-DtaVED0n.js";import{P as B}from"./Pagination-Du-v59ex.js";import"./styled-BUrYsluB.js";import"./createSvgIcon-e-FyxzSc.js";import"./createSvgIcon-C8KhxkLT.js";import"./useId-C5pU6Ksv.js";import"./useIsFocusVisible-CWAIqHst.js";import"./useControlled-DIh20Rar.js";import"./ButtonBase-ztTdquOL.js";import"./mergeSlotProps-BDZQvIdA.js";import"./index-DBJAgiAh.js";import"./Grow-Bh_FwPu_.js";import"./Typography-BBIY9fNW.js";function _({data:s,setIsOpenUpdatePopup:l,setItemUpdate:r}){var h;const[t,i]=a.useState(null),x=f=>{i(f.currentTarget)},c=()=>{i(null)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-8 gap-x-[1rem] py-[1rem] px-[2.25rem] border-t-[1px] border-solid border-[#e9eaf3] cursor-pointer",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"mx-6 text-[14px] font-medium tracking-[0.06em] leading-[1.167em]",children:s==null?void 0:s.designRuleId})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"mx-6 text-[14px] font-medium tracking-[0.06em] leading-[1.167em]",children:(h=s==null?void 0:s.typeOfJewellery)==null?void 0:h.name})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"mx-6 text-[14px] font-medium tracking-[0.06em] leading-[1.167em]",children:s==null?void 0:s.minSizeMasterGemstone})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"mx-6 text-[14px] font-medium tracking-[0.06em] leading-[1.167em]",children:s==null?void 0:s.maxSizeMasterGemstone})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"mx-6 text-[14px] font-medium tracking-[0.06em] leading-[1.167em]",children:s==null?void 0:s.minSizeJewellery})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"mx-6 text-[14px] font-medium tracking-[0.06em] leading-[1.167em]",children:s==null?void 0:s.maxSizeJewellery})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(I,{onClick:x,children:e.jsx(R,{})})})]}),e.jsx(O,{open:!!t,anchorEl:t,onClose:c,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:e.jsx(L,{onClick:()=>{l(!0),r(s),c()},children:"Update"})})]})}const q=async({id:s,formData:l})=>{try{return(await y.put(`/DesignRule?id=${s}`,l,b)).data}catch(r){console.log(">>> Api Update Design Rule ",r)}};function K({data:s,setIsOpenUpdatePopup:l}){const[r,t]=a.useState({minSizeMasterGemstone:"",maxSizeMasterGemstone:"",minSizeJewellery:"",maxSizeJewellery:""}),[i,x]=a.useState({}),c=n=>{const{name:o,value:p}=n.target;t({...r,[o]:p}),x({...i,[o]:""})},h=()=>{const n={};return Object.keys(r).forEach(o=>{const p=r[o];p==""&&!isNaN(Number(p))&&(n[o]=`${o} must be a valid number`)}),x(n),Object.keys(n).length===0},f=()=>{if(h()){const n=s==null?void 0:s.designRuleId;(async()=>{await q({id:n,formData:r})})(),G.success("Update Success"),l(!1),console.log("Updating with data:",r)}else console.log("Form validation failed")};return e.jsx(e.Fragment,{children:e.jsx("div",{onClick:()=>l(!1),className:"fixed top-0 right-0 left-0 bottom-0 bg-[rgba(0,0,0,0.6)] flex items-center justify-center",children:e.jsxs(F.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1,transition:{duration:.5}},onClick:n=>n.stopPropagation(),className:"bg-[#fff] w-[30rem] rounded-[10px] min-h-[250px]",children:[e.jsxs("div",{className:"relative text-center border-b-[1px] border-solid border-[#333] px-[1rem] py-[1rem] ",children:[e.jsx("h1",{className:"font-bold leading-5 text-[1.5rem]",children:"Update Design Rule"}),e.jsx("div",{onClick:()=>l(!1),className:"absolute top-[10px] right-[10px] cursor-pointer",children:e.jsx(P,{})})]}),e.jsxs(T,{children:[e.jsx(U,{expandIcon:e.jsx(A,{}),children:e.jsx("h2",{className:"text-[1.1rem] font-medium pb-[3px]",children:"Current Data"})}),e.jsx(E,{children:e.jsxs("div",{children:[e.jsxs("p",{children:["Type Of Jewellery ID: ",s==null?void 0:s.typeOfJewelleryId]}),e.jsxs("p",{children:["Min Size Master Gemstone: ",s==null?void 0:s.minSizeMasterGemstone]}),e.jsxs("p",{children:["Max Size Master Gemstone: ",s==null?void 0:s.maxSizeMasterGemstone]}),e.jsxs("p",{children:["Min Size Jewellery: ",s==null?void 0:s.minSizeJewellery]}),e.jsxs("p",{children:["Max Size Jewellery: ",s==null?void 0:s.maxSizeJewellery]})]})})]}),e.jsxs("div",{className:"px-[1rem] py-[1rem]",children:[e.jsxs("div",{className:"flex flex-col ",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"text-[1.1rem] font-medium pb-[3px]",children:"Min Size Master Gemstone"}),e.jsx("div",{children:e.jsx(g,{name:"minSizeMasterGemstone",onChange:c,error:!!i.minSizeMasterGemstone,helperText:i==null?void 0:i.minSizeMasterGemstone,fullWidth:!0,variant:"outlined",size:"small",sx:{minHeight:"4rem"}})})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"text-[1.1rem] font-medium pb-[3px]",children:"Max Size Master Gemstone"}),e.jsx("div",{children:e.jsx(g,{name:"maxSizeMasterGemstone",onChange:c,error:!!i.maxSizeMasterGemstone,helperText:i==null?void 0:i.maxSizeMasterGemstone,fullWidth:!0,variant:"outlined",size:"small",sx:{minHeight:"4rem"}})})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"text-[1.1rem] font-medium pb-[3px]",children:"Min Size Jewellery"}),e.jsx("div",{children:e.jsx(g,{name:"minSizeJewellery",onChange:c,error:!!i.minSizeJewellery,helperText:i==null?void 0:i.minSizeJewellery,fullWidth:!0,variant:"outlined",size:"small",sx:{minHeight:"4rem"}})})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"text-[1.1rem] font-medium pb-[3px]",children:"Max Size Jewellery"}),e.jsx("div",{children:e.jsx(g,{name:"maxSizeJewellery",onChange:c,error:!!i.maxSizeJewellery,helperText:i==null?void 0:i.maxSizeJewellery,fullWidth:!0,variant:"outlined",size:"small",sx:{minHeight:"4rem"}})})]})]}),e.jsx("div",{className:"mt-[1rem]",children:e.jsx(H,{onClick:f,variant:"contained",sx:{minWidth:"6rem"},children:"Update"})})]})]})})})}const Q=async({pageSize:s,page:l})=>{try{return(await y.get("/DesignRule",{headers:{...b},params:{pageIndex:l,pageSize:s}})).data}catch(r){return console.error(r),[]}};function ye(){const[l,r]=a.useState([]),[t,i]=a.useState(""),[x,c]=a.useState(!1),[h,f]=a.useState(),[n,o]=a.useState(1),[p,z]=a.useState(0),[j,M]=a.useState(1),S=async(u,m="")=>{const v=await Q({pageSize:6,page:u});if(m){const N=v.filter(d=>{var w;return String(d.designRuleId).toLowerCase().includes(m.toLowerCase())||String(d.minSizeMasterGemstone).toLowerCase().includes(m.toLowerCase())||String(d.maxSizeMasterGemstone).toLowerCase().includes(m.toLowerCase())||String(d.minSizeJewellery).toLowerCase().includes(m.toLowerCase())||String(d.maxSizeJewellery).toLowerCase().includes(m.toLowerCase())||String((w=d==null?void 0:d.typeOfJewellery)==null?void 0:w.name).toLowerCase().includes(m.toLowerCase())}),D=N.slice((n-1)*6,n*6);r(D),z(N.length)}else r(v),z(v.length)};a.useEffect(()=>{t?(o(1),S(1,t)):S(j)},[t,n,j,x]),a.useEffect(()=>{t?S(n,t):S(j)},[t,n,x]);const C=(u,m)=>{t===""?M(m):o(m)},J=u=>{i(u.target.value),o(1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-[100vh] py-[3rem] px-[3rem] bg-[#f7f9fc]",children:[e.jsx("div",{className:"w-[100%] min-h-[600px]",children:e.jsxs("div",{className:"rounded-[30px] border-[1px] border-solid border-[#e9eaf3] bg-[white]",children:[e.jsx("div",{className:"py-[1.75rem] px-[2.25rem] flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center ",children:[e.jsx("h2",{className:"mr-5 font-bold text-[1.5rem] leading-[1.125em]",children:"All Design Rule"}),e.jsx(g,{onChange:J,value:t,id:"outlined-basic",placeholder:"Search...",variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:"30px"},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"30px"}},InputProps:{startAdornment:e.jsx(W,{position:"start",children:e.jsx(k,{})})}})]})}),e.jsxs("div",{className:"bg-[#f7f9fc] grid grid-cols-8 gap-x-[1rem] py-[1rem] px-[2.25rem] border-t-[1px] border-solid border-[#e9eaf3]",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"mx-6 text-[1rem] font-medium tracking-[0.06em] leading-[1.167em]",children:"DesignRuleId"})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"mx-6 text-[1rem] font-medium tracking-[0.06em] leading-[1.167em]",children:"Type Of Jewelry"})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"mx-6 text-[1rem] font-medium tracking-[0.06em] leading-[1.167em]",children:"Min Size MasterGemstone"})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"mx-6 text-[1rem] font-medium tracking-[0.06em] leading-[1.167em]",children:"Max Size MasterGemstone"})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"mx-6 text-[1rem] font-medium tracking-[0.06em] leading-[1.167em]",children:"Min Size Jewellery"})}),e.jsx("div",{className:"flex items-center",children:e.jsx("h2",{className:"mx-6 text-[1rem] font-medium tracking-[0.06em] leading-[1.167em]",children:"Max Size Jewellery"})})]}),l==null?void 0:l.map((u,m)=>e.jsx(_,{data:u,setIsOpenUpdatePopup:c,setItemUpdate:f},m))]})}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx($,{children:e.jsx(B,{count:Math.ceil(p/6)||0,page:t===""?j:n,onChange:C})})})]}),x&&e.jsx(K,{setIsOpenUpdatePopup:c,data:h})]})}export{ye as default};
